{% load static %}
{% load base_post_tags %}

<div class = "profile-info-box">
    <div class = "profile-short-info">
        <div class = "profile-author-info">
            {% get_avatar account %}
            <p class = "profile-username">{{ account.user.first_name }} {{ account.user.last_name }}</p>
            <p class = "profile-nickname">{{ account.user.username }}</p>
        </div>
        <div class = "profile-activity-info">
            <div class = "profile-activity-box">
                <p class = "profile-activity-num" id = "profilePostsNum">{{ posts_num }}</p>
                <p class = "profile-activity-text">–î–æ–ø–∏—Å–∏</p>
            </div>
            <div class = "profile-activity-box">
                <p class = "profile-activity-num">{{ readers_num }}</p>
                <p class = "profile-activity-text">–ß–∏—Ç–∞—á—ñ</p>
            </div>
            <div class = "profile-activity-box">
                <p class = "profile-activity-num">{{ friends|length }}</p>
                <p class = "profile-activity-text">–î—Ä—É–∑—ñ</p>
            </div>
        </div>
        {% if albums_need %}
            <div class = "profile-header-button" id = "{{ account.pk }}">
                <input type="hidden" id = "accountsRelation" value = "{{ relation }}">
                <button class = "profile-header-confirm">–î–æ–¥–∞—Ç–∏</button>
                <button class = "profile-header-deny">–í–∏–¥–∞–ª–∏—Ç–∏</button>
                <p class = "profile-header-text hidden" id = "headerDelFriendText">–í–∏ –≤–∏–¥–∞–ª–∏–ª–∏ —Ü—å–æ–≥–æ –¥—Ä—É–≥–∞</p>
                <p class = "profile-header-text hidden" id = "headerSendReqText">–í–∏ –Ω–∞–¥—ñ—Å–ª–∞–ª–∏ –∑–∞–ø–∏—Ç</p>
                <p class = "profile-header-text hidden" id = "headerDelReqText">–í–∏ –≤—ñ–¥—Ö–∏–ª–∏ –∑–∞–ø–∏—Ç</p>
            </div>
        {% endif %}
    </div>
    {% if profile_with_additions %}
        <div class = "profile-requests-box">
            <div class = "profile-requests-panel">
                <img src = "{% static 'img/home_tt/humans.svg' %}" class = "profile-section-icon">
                <p class = "profile-requests-title">–ó–∞–ø–∏—Ç–∏</p>
                <a href="{% url 'all_requests' %}" class = "profile-requests-all">–î–∏–≤–∏—Ç–∏—Å—å –≤—Å—ñ</a>
            </div>
            <div class = "profile-possible-friends">
                {% for request in requests %}
                    <div class = "profile-friend-request">
                        <div class = "friend-avatar-restricter">
                            {% get_avatar request %}
                        </div>
                        <div class = "profile-request-info profile-info-other">
                            <p class = "profile-request-username profile-username-other">{{ request.user.username }}</p>
                            <p class = "profile-request-subs profile-not-important">{{ request.readers.all|length }} –ø—ñ–¥–ø–∏—Å–Ω–∏–∫—ñ–≤</p>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
        <div class = "profile-friends-messages">
            <div class = "profile-requests-panel profile-messages-panel">   
                <img src = "{% static 'img/base/chats2.svg' %}" class = "profile-section-icon">
                <p class = "profile-requests-title">–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è</p>
                <a href="{% url 'chats' %}" class = "profile-requests-all profile-messages-all">–î–∏–≤–∏—Ç–∏—Å—å –≤—Å—ñ</a>
            </div>
            <div class = "profile-messages">
                {% for friend in friends %}
                    <div class = "profile-friend-request profile-friend-message not-read-message">
                        <div class = "friend-avatar-restricter">
                            {% get_avatar friend %}
                        </div>
                        <div class = "profile-request-info profile-info-other">
                            <div class = "profile-friend-info">
                                <p class = "profile-friend-username profile-username-other">{{ friend.user.username }}</p>
                                <p class = "profile-friend-time profile-not-important">23:59</p>
                            </div>
                            <!-- Hard coded info, fix once TT with messages is done (TODO) -->
                            <p class = "profile-friend-text">–Ø –ø—Ä–∏–¥–±–∞–≤ –õ—É–Ω—É üò†</p>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    {% endif %}
    {% if albums_need %}
        <div class = "profile-requests-box">
            <div class = "profile-requests-panel">
                <img src = "{% static 'img/my_publications/img.svg' %}" class = "profile-section-icon">
                <p class = "profile-requests-title">–ê–ª—å–±–æ–º–∏</p>
                <a href="#" class = "profile-requests-all">–î–∏–≤–∏—Ç–∏—Å—å –≤—Å—ñ</a>
            </div>
            <div class = "profile-albums">
                {% for album, image in albums.items %}
                    <div class = "profile-album-block">
                        <h2 class = "profile-album-header">{{ album.name }}</h2>
                        {% if album.year %}
                            <p class = "album-additional-info">{{ album.topic.name }} <span class = "album-year">-1 —Ä—ñ–∫</span></p>
                        {% else %}
                            <p class = "album-additional-info">„Ö§</p>
                        {% endif %}
                        <img src = "{{ image.file.url }}" alt = "noimage" class = "profile-album-photo">
                    </div>
                {% endfor %}
            </div>
        </div>
    {% endif %}
</div>